(function(g){var k=function(){var k=65,Ca={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},I=function(b,c){var h=ba(b);h.r=Math.round(1E3*Math.pow(h.r/255,2.2))/1E3;h.g=Math.round(1E3*Math.pow(h.g/255,2.2))/1E3;h.b=Math.round(1E3*Math.pow(h.b/255,2.2))/1E3;g(c).data("colorpicker").fields.eq(1).val(h.r).end().eq(2).val(h.g).end().eq(3).val(h.b).end()},U=function(b,c){g(c).data("colorpicker").fields.eq(4).val(b.h).end().eq(5).val(b.s).end().eq(6).val(b.b).end()},
A=function(b,c){g(c).data("colorpicker").fields.eq(0).val(N(b)).end()},t=function(b,c){g(c).data("colorpicker").selector.css("backgroundColor","#"+N({h:b.h,s:100,b:100}));g(c).data("colorpicker").selectorIndic.css({left:parseInt(150*b.s/100,10),top:parseInt(150*(100-b.b)/100,10)})},V=function(b,c){g(c).data("colorpicker").hue.css("top",parseInt(150-150*b.h/360,10))},ca=function(b,c){g(c).data("colorpicker").currentColor.css("backgroundColor","#"+N(b))},W=function(b,c){g(c).data("colorpicker").newColor.css("backgroundColor",
"#"+N(b))},ma=function(b){b=b.charCode||b.keyCode||-1;if(b>k&&90>=b||32==b)return!1;!0===g(this).parent().parent().data("colorpicker").livePreview&&O.apply(this)},O=function(b){var c=g(this).parent().parent(),h;if(0<this.parentNode.className.indexOf("_hex")){h=c.data("colorpicker");var C=this.value,k=6-C.length;if(0<k){for(var D=[],na=0;na<k;na++)D.push("0");D.push(C);C=D.join("")}C=K(fa(C));h.color=h=C}else 0<this.parentNode.className.indexOf("_hsb")?c.data("colorpicker").color=h=ga({h:parseInt(c.data("colorpicker").fields.eq(4).val(),
10),s:parseInt(c.data("colorpicker").fields.eq(5).val(),10),b:parseInt(c.data("colorpicker").fields.eq(6).val(),10)}):(h=c.data("colorpicker"),C=parseInt(c.data("colorpicker").fields.eq(1).val(),10),k=parseInt(c.data("colorpicker").fields.eq(2).val(),10),D=parseInt(c.data("colorpicker").fields.eq(3).val(),10),C={r:Math.min(255,Math.max(0,C)),g:Math.min(255,Math.max(0,k)),b:Math.min(255,Math.max(0,D))},h.color=h=K(C));b&&(I(h,c.get(0)),A(h,c.get(0)),U(h,c.get(0)));t(h,c.get(0));V(h,c.get(0));W(h,c.get(0));
c.data("colorpicker").onChange.apply(c,[h,N(h),ba(h)])},Da=function(b){g(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")},Ea=function(){k=0<this.parentNode.className.indexOf("_hex")?70:65;g(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");g(this).parent().addClass("colorpicker_focus")},qa=function(b){var c=g(this).parent().find("input").focus();b={el:g(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?
360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:b.pageY,field:c,val:parseInt(c.val(),10),preview:g(this).parent().parent().data("colorpicker").livePreview};g(document).bind("mouseup",b,oa);g(document).bind("mousemove",b,pa)},pa=function(b){b.data.field.val(Math.max(0,Math.min(b.data.max,parseInt(b.data.val+b.pageY-b.data.y,10))));b.data.preview&&O.apply(b.data.field.get(0),[!0]);return!1},oa=function(b){O.apply(b.data.field.get(0),[!0]);b.data.el.removeClass("colorpicker_slider").find("input").focus();
g(document).unbind("mouseup",oa);g(document).unbind("mousemove",pa);return!1},Fa=function(b){b.preventDefault();b={cal:g(this).parent(),y:g(this).offset().top};b.preview=b.cal.data("colorpicker").livePreview;g(document).bind("mouseup touchend",b,ra);g(document).bind("mousemove touchmove",b,sa)},sa=function(b){var c=b;"undefined"!==typeof event&&event.touches&&(c=event.touches[0]);O.apply(b.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,c.pageY-b.data.y)))/
150,10)).get(0),[b.data.preview]);return!1},ra=function(b){I(b.data.cal.data("colorpicker").color,b.data.cal.get(0));A(b.data.cal.data("colorpicker").color,b.data.cal.get(0));g(document).unbind("mouseup touchend",ra);g(document).unbind("mousemove touchmove",sa);return!1},Ga=function(b){b.preventDefault();b={cal:g(this).parent(),pos:g(this).offset()};b.preview=b.cal.data("colorpicker").livePreview;g(document).bind("mouseup touchend",b,ha);g(document).bind("mousemove touchmove",b,ta)},ta=function(b){var c=
b;"undefined"!==typeof event&&event.touches&&(c=event.touches[0]);O.apply(b.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,c.pageY-b.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,c.pageX-b.data.pos.left))/150,10)).get(0),[b.data.preview]);return!1},ha=function(b){I(b.data.cal.data("colorpicker").color,b.data.cal.get(0));A(b.data.cal.data("colorpicker").color,b.data.cal.get(0));g(document).unbind("mouseup touchend",ha);g(document).unbind("mousemove touchmove",
ta);return!1},Ha=function(b){g(this).addClass("colorpicker_focus")},Ia=function(b){g(this).removeClass("colorpicker_focus")},Ja=function(b){b=g(this).parent();var c=b.data("colorpicker").color;b.data("colorpicker").origColor=c;ca(c,b.get(0));b.data("colorpicker").onSubmit(c,N(c),ba(c),b.data("colorpicker").el)},Ka=function(b){var c=g("body"),h=c.data("colorpickerId"),k=g(this).data("colorpickerId");h&&h===k?(g(document).trigger("mousedown"),c.data("colorpickerId",null)):(ua.call(this,b),c.data("colorpickerId",
k))},ua=function(b){var c,h,k=g("#"+g(this).data("colorpickerId"));k.data("colorpicker").onBeforeShow.apply(this,[k.get(0)]);var J=g(this).offset(),D="CSS1Compat"==document.compatMode;b=window.pageXOffset||(D?document.documentElement.scrollLeft:document.body.scrollLeft);c=window.pageYOffset||(D?document.documentElement.scrollTop:document.body.scrollTop);h=window.innerWidth||(D?document.documentElement.clientWidth:document.body.clientWidth);var t=J.top+this.offsetHeight,J=J.left;t+176>c+(window.innerHeight||
(D?document.documentElement.clientHeight:document.body.clientHeight))&&(t-=this.offsetHeight+176);J+356>b+h&&(J=Math.max(0,J-356));k.css({left:J+"px",top:t+"px"});0!=k.data("colorpicker").onShow.apply(this,[k.get(0)])&&k.show();g(document).bind("mousedown",{cal:k},va);return!1},va=function(b){La(b.data.cal.get(0),b.target,b.data.cal.get(0))||(0!=b.data.cal.data("colorpicker").onHide.apply(this,[b.data.cal.get(0)])&&b.data.cal.hide(),g(document).unbind("mousedown",va))},La=function(b,c,h){if(b==c)return!0;
if(b.contains)return b.contains(c);if(b.compareDocumentPosition)return!!(b.compareDocumentPosition(c)&16);for(c=c.parentNode;c&&c!=h;){if(c==b)return!0;c=c.parentNode}return!1},ga=function(b){return{h:Math.round(Math.min(360,Math.max(0,b.h))),s:Math.round(Math.min(100,Math.max(0,b.s))),b:Math.round(Math.min(100,Math.max(0,b.b)))}},fa=function(b){b=parseInt(-1<b.indexOf("#")?b.substring(1):b,16);return{r:b>>16,g:(b&65280)>>8,b:b&255}},K=function(b){var c={h:0,s:0,b:0},h=Math.min(b.r,b.g,b.b),g=Math.max(b.r,
b.g,b.b),h=g-h;c.b=g;c.s=0!=g?255*h/g:0;c.h=0!=c.s?b.r==g?(b.g-b.b)/h:b.g==g?2+(b.b-b.r)/h:4+(b.r-b.g)/h:-1;c.h*=60;0>c.h&&(c.h+=360);c.s*=100/255;c.b*=100/255;c.h=Math.round(c.h);c.s=Math.round(c.s);c.b=Math.round(c.b);return c},ba=function(b){var c,h,g;c=Math.round(b.h);var k=Math.round(255*b.s/100);b=Math.round(255*b.b/100);if(0==k)c=h=g=b;else{var k=(255-k)*b/255,t=c%60*(b-k)/60;360==c&&(c=0);60>c?(c=b,g=k,h=k+t):120>c?(h=b,g=k,c=b-t):180>c?(h=b,c=k,g=k+t):240>c?(g=b,c=k,h=b-t):300>c?(g=b,h=k,
c=k+t):360>c?(c=b,h=k,g=b-t):g=h=c=0}return{r:Math.round(c),g:Math.round(h),b:Math.round(g)}},Ma=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];g.each(c,function(b,g){1==g.length&&(c[b]="0"+g)});return c.join("")},N=function(b){return Ma(ba(b))},Na=function(){var b=g(this).parent(),c=b.data("colorpicker").origColor;b.data("colorpicker").color=c;I(c,b.get(0));A(c,b.get(0));U(c,b.get(0));t(c,b.get(0));V(c,b.get(0));W(c,b.get(0))};return{init:function(b){b=g.extend({},Ca,b||{});
if("string"==typeof b.color)b.color=K(fa(b.color));else if(void 0!=b.color.r&&void 0!=b.color.g&&void 0!=b.color.b)b.color=K(b.color);else if(void 0!=b.color.h&&void 0!=b.color.s&&void 0!=b.color.b)b.color=ga(b.color);else return this;return this.each(function(){if(!g(this).data("colorpickerId")){var c=g.extend({},b);c.origColor=b.color;var h="collorpicker_"+parseInt(1E3*Math.random());g(this).data("colorpickerId",h);h=g('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",
h);c.flat?h.appendTo(this).show():h.appendTo(document.body);c.fields=h.find("input").bind("keyup",ma).bind("change",O).bind("blur",Da).bind("focus",Ea);h.find("span").bind("mousedown touchstart",qa).end().find(">div.colorpicker_current_color").bind("click",Na);c.selector=h.find("div.colorpicker_color").bind("touchstart mousedown",Ga);c.selectorIndic=c.selector.find("div div");c.el=this;c.hue=h.find("div.colorpicker_hue div");h.find("div.colorpicker_hue").bind("mousedown touchstart",Fa);c.newColor=
h.find("div.colorpicker_new_color");c.currentColor=h.find("div.colorpicker_current_color");h.data("colorpicker",c);h.find("div.colorpicker_submit").bind("mouseenter touchstart",Ha).bind("mouseleave touchend",Ia).bind("click",Ja);I(c.color,h.get(0));U(c.color,h.get(0));A(c.color,h.get(0));V(c.color,h.get(0));t(c.color,h.get(0));ca(c.color,h.get(0));W(c.color,h.get(0));c.flat?h.css({position:"relative",display:"block"}):g(this).bind(c.eventName,Ka)}})},showPicker:function(){return this.each(function(){g(this).data("colorpickerId")&&
ua.apply(this)})},hidePicker:function(){return this.each(function(){g(this).data("colorpickerId")&&g("#"+g(this).data("colorpickerId")).hide()})},setColor:function(b){if("string"==typeof b)b=K(fa(b));else if(void 0!=b.r&&void 0!=b.g&&void 0!=b.b)b=K(b);else if(void 0!=b.h&&void 0!=b.s&&void 0!=b.b)b=ga(b);else return this;return this.each(function(){if(g(this).data("colorpickerId")){var c=g("#"+g(this).data("colorpickerId"));c.data("colorpicker").color=b;c.data("colorpicker").origColor=b;I(b,c.get(0));
U(b,c.get(0));A(b,c.get(0));V(b,c.get(0));t(b,c.get(0));ca(b,c.get(0));W(b,c.get(0))}})}}}();g.fn.extend({ColorPicker:k.init,ColorPickerHide:k.hidePicker,ColorPickerShow:k.showPicker,ColorPickerSetColor:k.setColor})})(jQuery);b4w.register("viewer_main",function(g,k){function nb(a,e){if(!e)return console.log("b4w init failure"),null;window.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1};window.ondragstart=function(a){a.preventDefault();a.stopPropagation();return!1};window.addEventListener("resize",h,!1);var P=document.createEvent("CustomEvent");P.initEvent("resize",!1,!1);window.dispatchEvent(P);ia.detect_mobile()||Wa(["gyro_use_tmp"],"disable");Oa.check()||Wa(["hmd_conf_tmp"],"disable");P=v.get_url_params();
wa=document.getElementById("info_left_down");z=document.getElementById("lights_cont");document.getElementById("build_date").innerHTML=Xa.date_str();d(Fa,"quality","string");oa();v.set_onclick("reset",sa);v.set_onclick("auto_rotate_cam",ob);v.set_onclick("pause",Ga);v.set_onclick("resume",ta);v.set_onclick("home",ra);d(X,"anim_active_object","string");d(X,"animation","string");d(X,"anim_mix_factor","number");d(X,"anim_slot","number");d(X,"anim_cyclic","bool");d(X,"anim_frame_current","number");v.set_onclick("anim_play",
C);v.set_onclick("anim_stop",J);v.set_onclick("anim_play_all",D);v.set_onclick("anim_stop_all",na);d(pb,"nla_frame_current","number");v.set_onclick("nla_play",qb);v.set_onclick("nla_stop",rb);d(xa,"shape_key_obj","string");d(xa,"shape_key_name","string");d(xa,"shape_key_value","number");d(Y,"material_name","string");L(Y,"material_diffuse_color");d(Y,"material_reflectivity","number");d(Y,"material_fresnel","number");d(Y,"material_fresnel_factor","number");d(Y,"material_parallax_scale","number");d(Y,
"material_parallax_steps","number");d(r,"material_name","string");d(r,"shore_smoothing","bool");d(r,"absorb_factor","number");d(r,"sss_strength","number");d(r,"sss_width","number");L(r,"water_fog_color");d(r,"water_fog_density","number");L(r,"shallow_water_col");d(r,"shallow_water_col_fac","number");L(r,"shore_water_col");d(r,"shore_water_col_fac","number");d(r,"foam_factor","number");d(r,"norm_uv_velocity","number");d(r,"water_dynamic","bool");d(r,"waves_height","number");d(r,"waves_length","number");
d(r,"dst_noise_scale0","number");d(r,"dst_noise_scale1","number");d(r,"dst_noise_freq0","number");d(r,"dst_noise_freq1","number");d(r,"dir_min_shore_fac","number");d(r,"dir_freq","number");d(r,"dir_noise_scale","number");d(r,"dir_noise_freq","number");d(r,"dir_min_noise_fac","number");d(r,"dst_min_fac","number");d(r,"waves_hor_fac","number");d(Pa,"environment_energy","string");L(Pa,"horizon_color");L(Pa,"zenith_color");d(Z,"light_name","string");L(Z,"light_color");d(Z,"pre_light_energy","number");
d(Z,"rude_light_energy","number");d(Z,"light_spot_size","number");d(Z,"light_spot_blend","number");d(Z,"light_distance","number");L(G,"sky_color");d(G,"rayleigh_brightness","number");d(G,"mie_brightness","number");d(G,"spot_brightness","number");d(G,"scatter_strength","number");d(G,"rayleigh_strength","number");d(G,"mie_strength","number");d(G,"rayleigh_collection_power","number");d(G,"mie_collection_power","number");d(G,"mie_distribution","number");d(Qa,"date","string");d(Qa,"day_time","number");
d(Ya,"sun_horizontal_position","number");d(Ya,"sun_vertical_position","number");d(sb,"max_sun_angle","number");v.set_onclick("run_sun",tb);v.set_onclick("stop_sun",ub);d(da,"csm_first_cascade_border","number");d(da,"csm_last_cascade_border","number");d(da,"self_shadow_polygon_offset","number");d(da,"self_shadow_normal_offset","number");d(da,"first_cascade_blur_radius","number");d(da,"last_cascade_blur_radius","number");d(M,"ssao_quality","string");d(M,"ssao_hemisphere","bool");d(M,"ssao_blur_depth",
"bool");d(M,"ssao_blur_discard_value","number");d(M,"ssao_radius_increase","number");d(M,"ssao_influence","number");d(M,"ssao_dist_factor","number");d(M,"ssao_only","bool");d(M,"ssao_white","bool");d(ya,"fog_intensity","number");d(ya,"fog_depth","number");d(ya,"fog_start","number");d(ya,"fog_height","number");d(Q,"dof_distance","number");d(Q,"dof_front_start","number");d(Q,"dof_front_end","number");d(Q,"dof_rear_start","number");d(Q,"dof_rear_end","number");d(Q,"dof_power","number");d(Q,"dof_bokeh_intensity",
"number");d(Q,"dof_on","bool");d(Ra,"god_rays_intensity","number");d(Ra,"god_rays_max_ray_length","number");d(Ra,"god_rays_steps","number");d(za,"brightness","number");d(za,"contrast","number");d(za,"exposure","number");d(za,"saturation","number");d(ua,"sfx_mix_mode","bool");Ka();d(Ma,"stereo","string");va();v.set_onclick("hmd_settings",N);d(Na,"gyro_use","bool");ga();d(b,"gmpd_settings","bool");d(Za,"wind_dir","number");d(Za,"wind_strength","number");d($a,"mb_factor","number");d($a,"mb_decay_threshold",
"number");d(Sa,"bloom_key","number");d(Sa,"bloom_blur","number");d(Sa,"bloom_edge_lum","number");d(Aa,"small_glow_mask_coeff","number");d(Aa,"large_glow_mask_coeff","number");d(Aa,"small_glow_mask_width","number");d(Aa,"large_glow_mask_width","number");d(vb,"canvas_rf","number");d(ab,"debug_view_mode","string");v.set_onclick("debug_change_colors",wb);d(xb,"render_time_threshold","number");L(ab,"wireframe_edge_color","object");d(Ia,"show_hud_debug_info","bool");d(Ja,"enable_gl_debug","bool");d(c,"outlining_overview_mode",
"bool");La();v.set_onclick("make_screenshot",yb);Ha();d(fa,"min_capabilities","bool");ba();Ca();V(P&&P.load?P.load:"",!1)}function Ca(){$(document).ready(function(){$(".ui-slider-handle").off("keydown");$(".ui-slider-handle").on("keydown",function(a){var e=this.parentElement.parentElement.children[0].getAttribute("id");if(e){var b=parseFloat(document.getElementById(e).value),c=parseFloat(document.getElementById(e).getAttribute("step"));188==a.keyCode&&f(e,b-c);190==a.keyCode&&f(e,b+c)}})})}function I(a,
e){if(wa&&m.can_select_objects()){$("#material_warning")[0].style.display="none";var b=E;b&&m.outlining_is_enabled(b)&&m.clear_outline_anim(b);b=m.pick_object(a,e);b&&zb.is_empty(b)||((E=b)?bb(b):cb(),A(),R||(b?(R=b,A(),v.enable_object_controls(b),w.create_kb_sensor_manifold(b,"QUIT",w.CT_SHOT,w.KEY_Q,function(a,e,b,P){R=null;A();v.disable_object_controls(a)})):U()))}}function U(){var a=m.get_active_camera();R=a;A();v.enable_camera_controls(!1,!1,!1,ja.get_container(),!0);w.create_kb_sensor_manifold(a,
"QUIT",w.CT_SHOT,w.KEY_Q,function(a,e,b,P){R=null;A();v.disable_camera_controls(a);w.remove_sensor_manifold(a,"ZOOM_TO")});var e=w.create_keyboard_sensor(w.KEY_Z),b=w.create_keyboard_sensor(w.KEY_DEC_POINT);w.create_sensor_manifold(a,"ZOOM_TO",w.CT_SHOT,[e,b],function(a){return a[0]||a[1]},function(a,e,b){(e=E)&&db.target_zoom_object(a,e)})}function A(){if(wa){var a=R?S(R):"NONE",e=E?S(E):"NONE",a="CONTROLLED: "+a+" | SELECTED: "+e;(e=E)&&(e=m.get_type_mesh_object(e))&&(a+=" | TYPE: "+e);e=R;E&&e&&
"CAMERA"===e.type&&(a+=" | DISTANCE: "+eb);wa.innerHTML=a}}function t(a,e){var b=document.getElementById(a);b.innerHTML="";for(var c=0;c<e.length;c++){var d=document.createElement("option");d.text=d.value=e[c];0===c&&(d.selected=!0);b.appendChild(d)}$("#"+a).selectmenu();$("#"+a).selectmenu("refresh")}function V(a,e){if(z)for(var b=0;b<z.children.length;b++)z.children[b].style.visibility="hidden";H=p=null;a?(b=a.split("/"),b=b[b.length-1].split(".")[0]):(a=y.get_std_assets_path()+"misc/logo.json",
b="Logo");e&&(ia.clear_render_callback(),Ba.cleanup());ma(!1);u.clear_errors_warnings();var c=document.getElementById("current_file");c.innerHTML=b;c.setAttribute("title",b+" ("+a+")");Ba.load(a,O,Da,!1)}function ca(){var a=ja.get_canvas(),a=x.get_device_by_type_element(x.DEVICE_MOUSE,a),a=x.get_vector_param(a,x.MOUSE_LOCATION,Ab);I(a[0],a[1])}function W(a){for(var e=0;e<a.length;e++)I(a[e].clientX,a[e].clientY)}function ma(a){var e=ja.get_canvas(),b=x.get_device_by_type_element(x.DEVICE_MOUSE,e);
b&&(a?x.attach_param_cb(b,x.MOUSE_DOWN_WHICH,ca):x.detach_param_cb(b,x.MOUSE_DOWN_WHICH,ca));(e=x.get_device_by_type_element(x.DEVICE_TOUCH,e))&&(a?x.attach_param_cb(e,x.TOUCH_START,W):x.detach_param_cb(e,x.TOUCH_START,W))}function O(a){ma(!0);E=null;Ea();U();v.enable_debug_controls();ha()&&Bb.enable_mixer_controls();"true"===q.get("gyro_use")&&Cb.enable_camera_rotation();"HMD"==y.get("stereo")&&(Oa.update(),fb.enable_hmd(fb.HMD_ALL_AXES_MOUSE_NONE));ia.set_render_callback(pa);a=w.create_elapsed_sensor();
w.create_sensor_manifold(m.get_active_camera(),"TO_OBJ",w.CT_CONTINUOUS,[a],null,function(a,b,c){if(1==c&&E){if(c=E)b=Db,Eb.get_object_center(c,!0,b),a=db.get_translation(a,Fb),eb=Gb.dist(b,a).toFixed(3);A()}})}function Da(a,e){document.getElementById("loading_progress").innerHTML=a+"% ("+Math.round(10*e/1E3)/10+"s)";var b=u.get_error_quantity(),c=u.get_warning_quantity();if(Ba.is_primary_loaded()){h();var d=u.get_error_quantity(),f=u.get_warning_quantity();f||d?z.setAttribute("title","Errors: "+
d+", Warnings: "+f+"\nSee browser console for more info"):z.setAttribute("title","Loaded OK");c||b||(z.children[0].style.visibility="hidden",z.children[1].style.visibility="hidden",z.children[2].style.visibility="visible")}c&&!b&&(z.children[0].style.visibility="hidden",z.children[1].style.visibility="visible",z.children[2].style.visibility="hidden");b&&(z.children[0].style.visibility="visible",z.children[1].style.visibility="hidden",z.children[2].style.visibility="hidden")}function Ea(){for(var a=
m.get_active(),e=m.get_scenes(),b=0;b<e.length;b++){var c=e[b];c!=a&&qa(c)}qa(a);bb=function(a){var e=aa.get_materials_names(a);t("material_name",e);gb(a,e[0]);a=aa.get_water_material_params(a,e[0]);e="shallow_water_col shallow_water_col_fac shore_water_col shore_water_col_fac water_fog_color water_fog_density absorb_factor sss_strength sss_width foam_factor norm_uv_velocity waves_height waves_length dst_noise_scale0 dst_noise_scale1 dst_noise_freq0 dst_noise_freq1 dir_min_shore_fac dir_freq dir_noise_scale dir_noise_freq dir_min_noise_fac dst_min_fac waves_hor_fac water_dynamic shore_smoothing".split(" ");
a?(l(e,"enable"),m.get_water_mat_params(a),a.shallow_water_col&&T("shallow_water_col",a.shallow_water_col),a.shallow_water_col_fac&&f("shallow_water_col_fac",a.shallow_water_col_fac),a.shore_water_col&&T("shore_water_col",a.shore_water_col),a.shore_water_col_fac&&f("shore_water_col_fac",a.shore_water_col_fac),a.water_fog_color&&(T("water_fog_color",a.water_fog_color),f("water_fog_density",a.water_fog_density)),f("absorb_factor",a.absorb_factor),f("sss_strength",a.sss_strength),f("sss_width",a.sss_width),
f("foam_factor",a.foam_factor),f("norm_uv_velocity",a.norm_uv_velocity),f("waves_height",a.waves_height),f("waves_length",a.waves_length),f("dst_noise_scale0",a.dst_noise_scale0),f("dst_noise_scale1",a.dst_noise_scale1),f("dst_noise_freq0",a.dst_noise_freq0),f("dst_noise_freq1",a.dst_noise_freq1),f("dir_min_shore_fac",a.dir_min_shore_fac),f("dir_freq",a.dir_freq),f("dir_noise_scale",a.dir_noise_scale),f("dir_noise_freq",a.dir_noise_freq),f("dir_min_noise_fac",a.dir_min_noise_fac),f("dst_min_fac",
a.dst_min_fac),f("waves_hor_fac",a.waves_hor_fac)):l(e,"disable")};Hb();a=m.get_all_objects("LAMP");e=[];for(b=0;b<a.length;b++)e.push(S(a[b]));t("light_name",e);0<a.length&&hb(a[0]);Ib();Jb();Kb();Lb();Mb();Nb();Ob();Pb();Qb();Rb();Sb();Tb();Ub();cb();$("#debug_view_mode").val("DV_NONE");$("#debug_view_mode").selectmenu("refresh",!0);l(["debug_change_colors"],"disable");l(["render_time_threshold"],"disable");$("#wireframe_edge_color div").css("backgroundColor","#333");$("#render_time_threshold").trigger("change");
b=new Date(document.getElementById("date").value);Qa({date:b})}function qa(a){m.set_active(a);m.get_active_camera();var e=[];a=m.get_all_objects();for(var b=0;b<a.length;b++){var c=a[b];n.is_animated(c)&&(p||(p=c),e.push(S(c)))}b="anim_active_object anim_slot animation anim_cyclic anim_frame_range anim_mix_factor anim_frame_current anim_play anim_stop".split(" ");p?(l(b,"enable"),t("anim_active_object",e),X({anim_active_object:S(p)})):l(b,"disable");e=["nla_play","nla_stop","nla_status","nla_frame_current",
"nla_playing"];b=["nla_frame_range"];if(B.check_nla()){B.check_logic_nodes()?(l(e,"disable"),document.getElementById("nla_status").innerHTML="CONTROLLED BY LOGIC NODES"):l(e,"enable");l(b,"enable");var e=document.getElementById("nla_frame_current"),b=document.getElementById("nla_frame_range"),c=B.get_frame_start(),d=B.get_frame_end();-1!=c&&-1!=d?(b.innerHTML=c+" - "+d,e.min=""+c,e.max=""+d):b.innerHTML="N/A"}else l(e,"disable"),l(b,"disable");e=[];for(b=0;b<a.length;b++)c=a[b],ka.check_shape_keys(c)&&
(H||(H=c),e.push(S(c)));a=["shape_key_obj","shape_key_name","shape_key_value"];H?(l(a,"enable"),t("shape_key_obj",e),xa({shape_key_obj:S(H)})):l(a,"disable")}function pa(a,e){m.get_active_camera();if(p){var b=document.getElementById("anim_status"),c=parseInt(document.getElementById("anim_slot").value);n.is_play(p,c)?(c=Math.round(n.get_frame(p,c)),parseInt($("#anim_frame_current").val())!==c&&f("anim_frame_current",c),b.innerHTML="PLAYING"):b.innerHTML="STOPPED"}B.check_nla()&&(B.check_logic_nodes()||
(b=document.getElementById("nla_status"),B.is_play()?b.innerHTML="PLAYING":b.innerHTML="STOPPED"),c=parseInt(B.get_frame().toFixed(0)),B.is_play()&&parseInt($("#nla_frame_current").val())!==c&&f("nla_frame_current",c))}function oa(){switch(y.get("quality")){case y.P_ULTRA:var a=0;break;case y.P_HIGH:a=1;break;case y.P_LOW:a=2;break;case y.P_CUSTOM:a=3}document.getElementById("quality").options[a].selected=!0;$("#quality").selectmenu("refresh")}function Fa(a){q.set("quality",a.quality);setTimeout(function(){window.location.reload()},
100)}function sa(){q.cleanup();var a=window.location.href.replace(/load=.*?(&|$)/,"").replace(/(&|\?)$/,"");window.location.href=a}function ra(){V(null,!0)}function Ga(){ia.pause()}function ta(){ia.resume()}function ha(){return"true"===q.get("sfx_mix_mode")?!0:!1}function Ha(){var a=Number("true"===q.get("show_hud_debug_info"));document.getElementById("show_hud_debug_info").options[a].selected=!0;$("#show_hud_debug_info").slider("refresh");a=""==q.get("enable_gl_debug")?0:Number("true"===q.get("enable_gl_debug"));
document.getElementById("enable_gl_debug").options[a].selected=!0;$("#enable_gl_debug").slider("refresh")}function Ia(a){q.set("show_hud_debug_info",a.show_hud_debug_info);window.location.reload()}function Ja(a){q.set("enable_gl_debug",a.enable_gl_debug);window.location.reload()}function Ka(){var a=Number("true"===q.get("sfx_mix_mode"));document.getElementById("sfx_mix_mode").options[a].selected=!0;$("#sfx_mix_mode").slider("refresh")}function ua(a){q.set("sfx_mix_mode",a.sfx_mix_mode);window.location.reload()}
function va(){var a=q.get("stereo")||"NONE";x.can_use_device(x.DEVICE_HMD)||(document.getElementById("stereo").options[2].setAttribute("disabled","disabled"),$("#stereo").selectmenu("refresh"),"HMD"==a&&(q.set("stereo","NONE"),a="NONE"));$("#stereo").val(a).selectmenu("refresh");$("#stereo").selectmenu("refresh",!0)}function La(){var a=""==q.get("outlining_overview_mode")?1:Number("true"===q.get("outlining_overview_mode"));document.getElementById("outlining_overview_mode").options[a].selected=!0;
$("#outlining_overview_mode").slider("refresh")}function ga(){var a=Number("true"===q.get("gyro_use"));document.getElementById("gyro_use").options[a].selected=!0;$("#gyro_use").slider("refresh")}function fa(a){q.set("min_capabilities",a.min_capabilities);window.location.reload()}function K(){return""==q.get("min_capabilities")?!1:"true"===q.get("min_capabilities")}function ba(){var a=Number(K());document.getElementById("min_capabilities").options[a].selected=!0;$("#min_capabilities").slider("refresh")}
function Ma(a){q.set("stereo",a.stereo);window.location.reload()}function N(a){Oa.show("hmd_container")}function Na(a){q.set("gyro_use",a.gyro_use);window.location.reload()}function b(a){a.gmpd_settings?ib.show():ib.hide()}function c(a){q.set("outlining_overview_mode",a.outlining_overview_mode);window.location.reload()}function h(a){ja.resize_to_container(!0);a=ja.get_canvas();document.getElementById("info_left_up").innerHTML=a.width+"x"+a.height+" ("+(a.width/a.clientWidth).toFixed(2)+":1.00)";if(Ba.is_primary_loaded()){a=
u.num_vertices();var e=u.num_triangles(),b=u.num_draw_calls(),c=u.num_shaders();document.getElementById("info_right_up").innerHTML=a+" verts, "+e+" tris, "+b+" draw calls, "+c+" shaders";b=u.geometry_stats();a=u.num_textures();var e=u.num_render_targets(),b=Math.round(10*(b.ibo_memory+b.vbo_memory))/10,c=(u.calc_vbo_garbage_byte_size()/Math.pow(1024,2)).toFixed(1),d=Math.round(10*a.memory)/10,f=Math.round(10*e.memory)/10,g=Math.round(10*(b+d+f))/10;document.getElementById("info_right_down").innerHTML=
"Geometry: "+b+" MiB ("+c+" junk)<br>Textures: "+d+" MiB ("+a.number+")<br>RTs: "+f+" MiB ("+e.number+")<br><br>Total: "+g+" MiB"}}function C(){var a=document.getElementById("animation").value,e=parseInt(document.getElementById("anim_slot").value);"None"!==a&&n.play(p,null,e)}function J(){document.getElementById("animation");var a=parseInt(document.getElementById("anim_slot").value);n.stop(p,a)}function D(){for(var a=document.getElementById("anim_active_object").children,e=0;e<a.length;e++){var b=
ea(a[e].value);n.play(b,null,n.SLOT_ALL)}}function na(){for(var a=document.getElementById("anim_active_object").children,e=0;e<a.length;e++){var b=ea(a[e].value);n.stop(b,n.SLOT_ALL)}}function qb(){B.play()}function rb(){B.stop()}function xa(a){if("shape_key_obj"in a){H=ea(a.shape_key_obj);var e=ka.get_shape_keys_names(H);e.length?(t("shape_key_name",e),la=e[0],e=ka.get_shape_key_value(H,la),f("shape_key_value",e)):t("shape_key_name",["N/K"])}"shape_key_name"in a&&(la=a.shape_key_name,e=ka.get_shape_key_value(H,
la),f("shape_key_value",e));"shape_key_value"in a&&ka.set_shape_key_value(H,la,a.shape_key_value)}function pb(a){"nla_frame_current"in a&&!B.is_play()&&(a=parseInt(a.nla_frame_current),B.set_frame(a))}function X(a){if("anim_active_object"in a){p=ea(a.anim_active_object);var e=n.get_anim_names(p);if(e.length){for(var b=[],c=0;c<e.length&&8>c;c++)b.push(c);e.push("None");t("animation",e);t("anim_slot",b);e=parseInt(document.getElementById("anim_slot").value);jb(p,e);Ta(p,e)}else t("animation",["N/A"]);
Ua(p)}if("anim_slot"in a){if(!p)return;e=a.anim_slot;jb(p,e);Ta(p,e);Ua(p)}"animation"in a&&(e=parseInt(document.getElementById("anim_slot").value),n.get_current_anim_name(p,e),"None"==a.animation?n.remove_slot_animation(p,e):(n.apply(p,a.animation,e),n.play(p,null,e)),Ta(p,e),Ua(p));"anim_cyclic"in a&&(e=document.getElementById("animation").value,e=n.get_slot_num_by_anim(p,e),n.set_behavior(p,a.anim_cyclic?n.AB_CYCLIC:n.AB_FINISH_RESET,e));"anim_frame_current"in a&&(e=parseInt(document.getElementById("anim_slot").value),
n.is_play(p,e)||(b=parseInt(a.anim_frame_current),n.set_frame(p,b,e)));"anim_mix_factor"in a&&n.set_skel_mix_factor(p,a.anim_mix_factor)}function jb(a,e){for(var b=n.get_current_anim_name(a,e),b=b||"None",c=$("#animation"),d=c.children(),f=0;f<d.length;f++){var g=d[f];if(g.value==b){g.selected=!0;c.selectmenu();c.selectmenu("refresh");break}}}function Ta(a,e){f("anim_cyclic",Number(n.get_behavior(a,e)==n.AB_CYCLIC));var b=document.getElementById("anim_frame_range"),c=n.get_anim_start_frame(a,e),d=
n.get_anim_length(a,e);-1!=c&&-1!=d?(d=c+d,b.innerHTML=c+" - "+d,b=document.getElementById("anim_frame_current"),b.min=""+c,b.max=""+d):b.innerHTML="N/A"}function Ua(a){for(var e=$("#anim_slot-listbox").find("a"),b=parseInt(document.getElementById("anim_slot").value),c=n.get_anim_type(a,b),b=0;b<e.length;b++){c=n.get_anim_type(a,b);switch(c){case n.OBJ_ANIM_TYPE_ARMATURE:c="ARMATURE";break;case n.OBJ_ANIM_TYPE_OBJECT:c="OBJECT";break;case n.OBJ_ANIM_TYPE_PARTICLES:c="PARTICLES";break;case n.OBJ_ANIM_TYPE_VERTEX:c=
"VERTEX";break;case n.OBJ_ANIM_TYPE_MATERIAL:c="MATERIAL";break;case n.OBJ_ANIM_TYPE_STATIC:c="STATIC";break;default:c="NONE"}e.eq(b);c=b+" ("+c+")";$("#anim_slot").children().eq(b).text(c)}$("#anim_slot").selectmenu();$("#anim_slot").selectmenu("refresh")}function Jb(){var a=m.get_ssao_params(),e="ssao_quality ssao_hemisphere ssao_blur_depth ssao_blur_discard_value ssao_radius_increase ssao_influence ssao_dist_factor ssao_only ssao_white".split(" ");if(a){l(e,"enable");for(var b=document.getElementById("ssao_quality"),
e=a.ssao_quality,b=b.options,c=0;c<b.length;c++){var d=b[c];d.selected=d.value==e?!0:!1}$("#ssao_quality").selectmenu("refresh");e=Number(a.ssao_hemisphere);document.getElementById("ssao_hemisphere").options[e].selected=!0;$("#ssao_hemisphere").slider("refresh");e=Number(a.ssao_blur_depth);document.getElementById("ssao_blur_depth").options[e].selected=!0;$("#ssao_blur_depth").slider("refresh");f("ssao_blur_discard_value",a.blur_discard_value);f("ssao_radius_increase",a.radius_increase);f("ssao_influence",
a.influence);f("ssao_dist_factor",a.dist_factor);e=Number(a.ssao_only);document.getElementById("ssao_only").options[e].selected=!0;$("#ssao_only").slider("refresh");e=Number(a.ssao_white);document.getElementById("ssao_white").options[e].selected=!0;$("#ssao_white").slider("refresh")}else l(e,"disable")}function M(a){m.get_ssao_params();var e={};"ssao_quality"in a&&(e.ssao_quality=kb(document.getElementById("ssao_quality")));"ssao_hemisphere"in a&&(e.ssao_hemisphere=Number(a.ssao_hemisphere));"ssao_blur_depth"in
a&&(e.ssao_blur_depth=Number(a.ssao_blur_depth));"ssao_blur_discard_value"in a&&(e.ssao_blur_discard_value=a.ssao_blur_discard_value);"ssao_radius_increase"in a&&(e.ssao_radius_increase=a.ssao_radius_increase);"ssao_influence"in a&&(e.ssao_influence=a.ssao_influence);"ssao_dist_factor"in a&&(e.ssao_dist_factor=a.ssao_dist_factor);"ssao_only"in a&&(e.ssao_only=Number(a.ssao_only));"ssao_white"in a&&(e.ssao_white=Number(a.ssao_white));m.set_ssao_params(e)}function Nb(){var a=m.get_color_correction_params(),
e=["brightness","contrast","exposure","saturation"];a?(l(e,"enable"),f("brightness",a.brightness),f("contrast",a.contrast),f("exposure",a.exposure),f("saturation",a.saturation)):l(e,"disable")}function za(a){var e=m.get_color_correction_params();e&&(e={},"brightness"in a&&(e.brightness=parseFloat(a.brightness)),"contrast"in a&&(e.contrast=parseFloat(a.contrast)),"exposure"in a&&(e.exposure=parseFloat(a.exposure)),"saturation"in a&&(e.saturation=parseFloat(a.saturation)),m.set_color_correction_params(e))}
function kb(a){a=a.options;for(var e=0;e<a.length;e++){var b=a[e];if(b.selected)return b.value}}function Kb(){var a=m.get_fog_params();f("fog_intensity",a.fog_intensity);f("fog_depth",a.fog_depth);f("fog_start",a.fog_start);f("fog_height",a.fog_height)}function ya(a){var b={};"fog_intensity"in a&&(b.fog_intensity=a.fog_intensity);"fog_depth"in a&&(b.fog_depth=a.fog_depth);"fog_start"in a&&(b.fog_start=a.fog_start);"fog_height"in a&&(b.fog_height=a.fog_height);m.set_fog_params(b)}function Ib(){var a=
m.get_shadow_params(),b="csm_first_cascade_border csm_last_cascade_border self_shadow_polygon_offset self_shadow_normal_offset first_cascade_blur_radius last_cascade_blur_radius res_ui-block-b num_ui-block-b blur_ui-block-b".split(" ");if(!a)return l(b,"disable"),document.getElementById("csm_resolution").innerHTML="",document.getElementById("csm_num").innerHTML="",document.getElementById("csm_borders").innerHTML="",document.getElementById("blur_radii").innerHTML="",null;l(b,"enable");lb(a);f("self_shadow_polygon_offset",
a.self_shadow_polygon_offset);f("self_shadow_normal_offset",a.self_shadow_normal_offset);f("first_cascade_blur_radius",a.first_cascade_blur_radius);a.enable_csm?(f("csm_first_cascade_border",a.csm_first_cascade_border),1<a.csm_num?(f("csm_last_cascade_border",a.csm_last_cascade_border),f("last_cascade_blur_radius",a.last_cascade_blur_radius)):l(["csm_last_cascade_border","last_cascade_blur_radius"],"disable")):l(["csm_first_cascade_border","csm_last_cascade_border","last_cascade_blur_radius"],"disable")}
function da(a){var b={};"csm_first_cascade_border"in a&&(b.csm_first_cascade_border=a.csm_first_cascade_border);"csm_last_cascade_border"in a&&(b.csm_last_cascade_border=a.csm_last_cascade_border);"self_shadow_polygon_offset"in a&&(b.self_shadow_polygon_offset=a.self_shadow_polygon_offset);"self_shadow_normal_offset"in a&&(b.self_shadow_normal_offset=a.self_shadow_normal_offset);"first_cascade_blur_radius"in a&&(b.first_cascade_blur_radius=a.first_cascade_blur_radius);"last_cascade_blur_radius"in
a&&(b.last_cascade_blur_radius=a.last_cascade_blur_radius);m.set_shadow_params(b);lb(m.get_shadow_params())}function lb(a){document.getElementById("csm_resolution").innerHTML="&nbsp;&nbsp;"+a.csm_resolution;if(a.enable_csm){document.getElementById("csm_num").innerHTML=" "+a.csm_num;for(var b=["csm_borders","blur_radii"],c=0;c<b.length;c++){var d=b[c],f=a[d],d=document.getElementById(d);d.innerHTML="(";for(var g=0;g<f.length;g++)0<g&&(d.innerHTML+=" __ "),d.innerHTML+=Math.round(10*f[g])/10;d.innerHTML+=
")"}}else document.getElementById("cascades-info-block").style.display="none",document.getElementById("csm_first_cascade_border-info-block").style.display="none",document.getElementById("csm_last_cascade_border-info-block").style.display="none",document.getElementById("blur_radii-info-block").style.display="none",document.getElementById("first_cascade_blur_radius-label").innerHTML="Blur radius",document.getElementById("last_cascade_blur_radius-info-block").style.display="none"}function Hb(){var a=
m.get_environment_colors();f("environment_energy",a[0]);T("horizon_color",a[1]);T("zenith_color",a[2])}function Pa(a){("environment_energy"in a||"horizon_color"in a||"zenith_color"in a)&&m.set_environment_colors(a.environment_energy,a.horizon_color,a.zenith_color)}function ab(a){var b={};if("string"==typeof a.debug_view_mode){var c=kb(document.getElementById("debug_view_mode"));switch(c){case "DV_NONE":b.debug_view_mode=u.DV_NONE;l(["wireframe_edge_color"],"disable");break;case "DV_OPAQUE_WIREFRAME":b.debug_view_mode=
u.DV_OPAQUE_WIREFRAME;l(["wireframe_edge_color"],"enable");break;case "DV_TRANSPARENT_WIREFRAME":b.debug_view_mode=u.DV_TRANSPARENT_WIREFRAME;l(["wireframe_edge_color"],"enable");break;case "DV_FRONT_BACK_VIEW":b.debug_view_mode=u.DV_FRONT_BACK_VIEW;l(["wireframe_edge_color"],"enable");break;case "DV_BOUNDINGS":b.debug_view_mode=u.DV_BOUNDINGS;l(["wireframe_edge_color"],"disable");break;case "DV_CLUSTERS_VIEW":b.debug_view_mode=u.DV_CLUSTERS_VIEW;l(["wireframe_edge_color"],"disable");break;case "DV_BATCHES_VIEW":b.debug_view_mode=
u.DV_BATCHES_VIEW;l(["wireframe_edge_color"],"disable");break;case "DV_RENDER_TIME":b.debug_view_mode=u.DV_RENDER_TIME,l(["wireframe_edge_color"],"disable")}"DV_CLUSTERS_VIEW"==c||"DV_BATCHES_VIEW"==c?l(["debug_change_colors"],"enable"):l(["debug_change_colors"],"disable");"DV_RENDER_TIME"==c?l(["render_time_threshold"],"enable"):l(["render_time_threshold"],"disable")}"object"==typeof a.wireframe_edge_color&&(b.wireframe_edge_color=a.wireframe_edge_color);u.set_debug_params(b)}function wb(){u.set_debug_params({debug_colors_seed:Math.random()})}
function xb(a){"render_time_threshold"in a&&u.set_debug_params({render_time_threshold:a.render_time_threshold})}function yb(){Vb.shot()}function Qb(){var a=m.get_sky_params(),b="sky_color rayleigh_brightness mie_brightness spot_brightness scatter_strength rayleigh_strength mie_strength rayleigh_collection_power mie_collection_power mie_distribution".split(" ");if(!a)return l(b,"disable"),null;l(b,"enable");T("sky_color",a.color);f("rayleigh_brightness",a.rayleigh_brightness);f("mie_brightness",a.mie_brightness);
f("spot_brightness",a.spot_brightness);f("scatter_strength",a.scatter_strength);f("rayleigh_strength",a.rayleigh_strength);f("mie_strength",a.mie_strength);f("rayleigh_collection_power",a.rayleigh_collection_power);f("mie_collection_power",a.mie_collection_power);f("mie_distribution",a.mie_distribution)}function G(a){var b={};"sky_color"in a&&(b.color=a.sky_color);"rayleigh_brightness"in a&&(b.rayleigh_brightness=a.rayleigh_brightness);"mie_brightness"in a&&(b.mie_brightness=a.mie_brightness);"spot_brightness"in
a&&(b.spot_brightness=a.spot_brightness);"scatter_strength"in a&&(b.scatter_strength=a.scatter_strength);"rayleigh_strength"in a&&(b.rayleigh_strength=a.rayleigh_strength);"mie_strength"in a&&(b.mie_strength=a.mie_strength);"rayleigh_collection_power"in a&&(b.rayleigh_collection_power=a.rayleigh_collection_power);"mie_collection_power"in a&&(b.mie_collection_power=a.mie_collection_power);"mie_distribution"in a&&(b.mie_distribution=a.mie_distribution);m.set_sky_params(b)}function gb(a,b){var c=aa.get_material_extended_params(a,
b),d="material_diffuse_color material_name material_reflectivity material_fresnel material_fresnel_factor material_parallax_scale material_parallax_steps".split(" ");if(!c)return l(d,"disable"),$("#material_warning")[0].style.display="block",null;var g=aa.get_diffuse_color(a,b);c.diffuse_color=g.subarray(0,3);l(d,"enable");T("material_diffuse_color",c.diffuse_color);f("material_reflectivity",c.reflect_factor);f("material_fresnel",c.fresnel);f("material_fresnel_factor",c.fresnel_factor);f("material_parallax_scale",
c.parallax_scale);f("material_parallax_steps",c.parallax_steps)}function Y(a){var b=E;"material_name"in a&&gb(b,a.material_name);if("material_diffuse_color"in a){var c=a.material_diffuse_color.slice();c.push(1);aa.set_diffuse_color(b,$("#material_name").val(),c)}c={};"material_reflectivity"in a&&(c.material_reflectivity=a.material_reflectivity);"material_fresnel"in a&&(c.material_fresnel=a.material_fresnel);"material_fresnel_factor"in a&&(c.material_fresnel_factor=a.material_fresnel_factor);"material_parallax_scale"in
a&&(c.material_parallax_scale=a.material_parallax_scale);"material_parallax_steps"in a&&(c.material_parallax_steps=a.material_parallax_steps);aa.set_material_extended_params(b,$("#material_name").val(),c);m.update_scene_materials_params()}function r(a){var b=E,c="waves_height waves_length sss_strength sss_width dst_noise_scale0 dst_noise_scale1 dst_noise_freq0 dst_noise_freq1 dir_min_shore_fac dir_freq dir_noise_scale dir_noise_freq dir_min_noise_fac dst_min_fac waves_hor_fac".split(" ");if(!b)return null;
var d={},f=$("#water_dynamic").val(),g=$("#shore_smoothing").val();Boolean(Number(f))?l(c,"enable"):l(c,"disable");Boolean(Number(g))?l(["absorb_factor"],"enable"):l(["absorb_factor"],"disable");"shore_smoothing"in a&&(d.shore_smoothing=a.shore_smoothing);"absorb_factor"in a&&(d.absorb_factor=a.absorb_factor);"water_fog_color"in a&&(d.water_fog_color=a.water_fog_color);"water_fog_density"in a&&(d.water_fog_density=a.water_fog_density);"shallow_water_col"in a&&(d.shallow_water_col=a.shallow_water_col);
"shallow_water_col_fac"in a&&(d.shallow_water_col_fac=a.shallow_water_col_fac);"shore_water_col"in a&&(d.shore_water_col=a.shore_water_col);"shore_water_col_fac"in a&&(d.shore_water_col_fac=a.shore_water_col_fac);"foam_factor"in a&&(d.foam_factor=a.foam_factor);"norm_uv_velocity"in a&&(d.norm_uv_velocity=a.norm_uv_velocity);"sss_strength"in a&&(d.sss_strength=a.sss_strength);"sss_width"in a&&(d.sss_width=a.sss_width);"water_dynamic"in a&&(d.water_dynamic=a.water_dynamic);"waves_height"in a&&(d.waves_height=
a.waves_height);"waves_length"in a&&(d.waves_length=a.waves_length);"dst_noise_scale0"in a&&(d.dst_noise_scale0=a.dst_noise_scale0);"dst_noise_scale1"in a&&(d.dst_noise_scale1=a.dst_noise_scale1);"dst_noise_freq0"in a&&(d.dst_noise_freq0=a.dst_noise_freq0);"dst_noise_freq1"in a&&(d.dst_noise_freq1=a.dst_noise_freq1);"dir_min_shore_fac"in a&&(d.dir_min_shore_fac=a.dir_min_shore_fac);"dir_freq"in a&&(d.dir_freq=a.dir_freq);"dir_noise_scale"in a&&(d.dir_noise_scale=a.dir_noise_scale);"dir_noise_freq"in
a&&(d.dir_noise_freq=a.dir_noise_freq);"dir_min_noise_fac"in a&&(d.dir_min_noise_fac=a.dir_min_noise_fac);"dst_min_fac"in a&&(d.dst_min_fac=a.dst_min_fac);"waves_hor_fac"in a&&(d.waves_hor_fac=a.waves_hor_fac);if(!aa.set_water_material_params(b,$("#material_name").val(),d))return null;m.update_scene_materials_params();m.set_water_params(d)}function hb(a){if(a=F.get_light_params(a)){var b=a.light_energy-Math.floor(a.light_energy),c=Math.floor(a.light_energy);T("light_color",a.light_color);f("rude_light_energy",
c);f("pre_light_energy",b);b=c+b;$("#light_energy").text(b);b=a.light_type;$("#light_type").text(b);"SPOT"==a.light_type?(l(["light_spot_blend","light_spot_size"],"enable"),"light_spot_blend"in a&&f("light_spot_blend",a.light_spot_blend),"light_spot_size"in a&&f("light_spot_size",Math.round(a.light_spot_size*Wb))):l(["light_spot_blend","light_spot_size"],"disable");"SPOT"==a.light_type||"POINT"==a.light_type?(l(["light_distance"],"enable"),"light_distance"in a&&f("light_distance",a.light_distance)):
l(["light_distance"],"disable")}}function Z(a){"light_name"in a&&hb(ea(a.light_name));var b={};"light_color"in a&&(b.light_color=a.light_color);"pre_light_energy"in a&&(b.light_energy=parseFloat(a.pre_light_energy)+parseFloat(document.getElementById("rude_light_energy").value));"rude_light_energy"in a&&(b.light_energy=parseFloat(a.rude_light_energy)+parseFloat(document.getElementById("pre_light_energy").value));"light_spot_size"in a&&(b.light_spot_size=parseFloat(a.light_spot_size*Xb));"light_spot_blend"in
a&&(b.light_spot_blend=parseFloat(a.light_spot_blend));"light_distance"in a&&(b.light_distance=parseFloat(a.light_distance));a=ea($("#light_name").val());F.set_light_params(a,b);b=F.get_light_params(a).light_energy.toFixed(2);$("#light_energy").text(b)}function Pb(){var a=F.get_sun_params(),b=["sun_horizontal_position","sun_vertical_position"];if(!a)return l(b,"disable"),null;f("sun_horizontal_position",a.hor_position);f("sun_vertical_position",a.vert_position)}function Ya(a){var b={};"sun_horizontal_position"in
a&&(b.hor_position=parseFloat(a.sun_horizontal_position),b.vert_position=parseFloat(document.getElementById("sun_vertical_position").value));"sun_vertical_position"in a&&(b.hor_position=parseFloat(document.getElementById("sun_horizontal_position").value),b.vert_position=parseFloat(a.sun_vertical_position));F.set_sun_params(b)}function sb(a){a=parseFloat(a.max_sun_angle);F.set_max_sun_angle(a)}function Qa(a){"day_time"in a&&F.set_day_time(a.day_time);"date"in a&&F.set_date(new Date(a.date))}function tb(){var a=
0,b=parseFloat(document.getElementById("day_time").value),c=w.create_elapsed_sensor(),d=F.get_lamps("SUN")[0];w.create_sensor_manifold(d,"ELAPSED",w.CT_CONTINUOUS,[c],function(a){return a[0]},function(c,d,g){1==g&&(a=document.getElementById("sun_time_multiplier").value,c=w.get_sensor_value(c,d,0),b+=c*a/3600,24<b&&(b-=Math.floor(b)),f("day_time",b))})}function Ub(){var a=F.get_lamps("SUN")[0],b=["sn-ui-grid-b"];F.get_lamps().length?a||l("run_sun stop_sun date sun_time_multiplier day_time max_sun_angle".split(" "),
"disable"):l(b,"disable")}function cb(){l("material_diffuse_color material_name material_reflectivity material_fresnel material_fresnel_factor material_parallax_scale material_parallax_steps".split(" "),"disable");l("shallow_water_col shallow_water_col_fac shore_water_col shore_water_col_fac water_fog_color water_fog_density absorb_factor sss_strength sss_width foam_factor norm_uv_velocity waves_height waves_length dst_noise_scale0 dst_noise_scale1 dst_noise_freq0 dst_noise_freq1 dir_min_shore_fac dir_freq dir_noise_scale dir_noise_freq dir_min_noise_fac dst_min_fac waves_hor_fac water_dynamic shore_smoothing".split(" "),
"disable")}function ub(){var a=F.get_lamps("SUN")[0];w.check_sensor_manifolds(a)&&w.remove_sensor_manifold(a,"ELAPSED")}function Lb(){var a=m.get_dof_params(),b="dof_distance dof_object dof_front_start dof_front_end dof_rear_start dof_rear_end dof_power dof_bokeh_intensity dof_on".split(" ");if(a){f("dof_front_start",a.dof_front_start);f("dof_front_end",a.dof_front_end);f("dof_rear_start",a.dof_rear_start);f("dof_rear_end",a.dof_rear_end);f("dof_power",a.dof_power);f("dof_bokeh_intensity",a.dof_bokeh_intensity);
$("#dof_distance").parent().parent().parent().removeClass("ui-disabled");if(a.dof_object){var c=S(a.dof_object);$("#dof_object").text(c);b.splice(0,1);$("#dof_distance").parent().addClass("ui-disabled");$("#dof_object").parent().removeClass("ui-disabled")}else f("dof_distance",a.dof_distance),b.splice(1,1),$("#dof_distance").parent().removeClass("ui-disabled"),$("#dof_object").parent().addClass("ui-disabled");l(b,"enable");a=0<a.dof_distance?1:0;document.getElementById("dof_on").options[a].selected=
!0;$("#dof_on").slider("refresh")}else l(b,"disable")}function Q(a){var b={};"dof_distance"in a&&Number($("#dof_on").val())&&(b.dof_distance=a.dof_distance);"dof_front_start"in a&&(b.dof_front_start=a.dof_front_start);"dof_front_end"in a&&(b.dof_front_end=a.dof_front_end);"dof_rear_start"in a&&(b.dof_rear_start=a.dof_rear_start);"dof_rear_end"in a&&(b.dof_rear_end=a.dof_rear_end);"dof_power"in a&&(b.dof_power=a.dof_power);"dof_bokeh_intensity"in a&&(b.dof_bokeh_intensity=a.dof_bokeh_intensity);"dof_on"in
a&&(b.dof_on=Boolean(a.dof_on));m.set_dof_params(b)}function Mb(){var a=m.get_god_rays_params(),b=["god_rays_intensity","god_rays_max_ray_length","god_rays_steps"];a?(l(b,"enable"),a&&(f("god_rays_intensity",a.god_rays_intensity),f("god_rays_max_ray_length",a.god_rays_max_ray_length),f("god_rays_steps",a.god_rays_steps))):l(b,"disable")}function Ra(a){var b={};"god_rays_intensity"in a&&(b.god_rays_intensity=a.god_rays_intensity);"god_rays_max_ray_length"in a&&(b.god_rays_max_ray_length=a.god_rays_max_ray_length);
"god_rays_steps"in a&&(b.god_rays_steps=a.god_rays_steps);m.set_god_rays_params(b)}function vb(a){"canvas_rf"in a&&(y.set("canvas_resolution_factor",a.canvas_rf),h())}function Rb(){var a=m.get_mb_params(),b=["mb_factor","mb_decay_threshold"];a?(l(b,"enable"),a&&(f("mb_factor",a.mb_factor),f("mb_decay_threshold",a.mb_decay_threshold))):l(b,"disable")}function $a(a){var b={};"mb_factor"in a&&(b.mb_factor=a.mb_factor);"mb_decay_threshold"in a&&(b.mb_decay_threshold=a.mb_decay_threshold);m.set_mb_params(b)}
function Sb(){var a=m.get_bloom_params(),b=["bloom_key","bloom_blur","bloom_edge_lum"];a?(l(b,"enable"),a&&(f("bloom_key",a.key),f("bloom_blur",a.blur),f("bloom_edge_lum",a.edge_lum))):l(b,"disable")}function Sa(a){var b={};"bloom_key"in a&&(b.key=a.bloom_key);"bloom_blur"in a&&(b.blur=a.bloom_blur);"bloom_edge_lum"in a&&(b.edge_lum=a.bloom_edge_lum);m.set_bloom_params(b)}function Tb(){var a=m.get_glow_material_params(),b=["small_glow_mask_coeff","large_glow_mask_coeff","small_glow_mask_width","large_glow_mask_width"];
a?(l(b,"enable"),f("small_glow_mask_coeff",a.small_glow_mask_coeff),f("large_glow_mask_coeff",a.large_glow_mask_coeff),f("small_glow_mask_width",a.small_glow_mask_width),f("large_glow_mask_width",a.large_glow_mask_width)):l(b,"disable")}function Aa(a){var b={};"small_glow_mask_coeff"in a&&(b.small_glow_mask_coeff=a.small_glow_mask_coeff);"large_glow_mask_coeff"in a&&(b.large_glow_mask_coeff=a.large_glow_mask_coeff);"small_glow_mask_width"in a&&(b.small_glow_mask_width=a.small_glow_mask_width);"large_glow_mask_width"in
a&&(b.large_glow_mask_width=a.large_glow_mask_width);m.set_glow_material_params(b)}function T(a,b){var c=Va.rgb_to_css(b),d=Va.rgb_to_css_hex(b),c={r:c[0],g:c[1],b:c[2]};$("#"+a).ColorPickerSetColor(c);$("#"+a+" div").css("backgroundColor",d)}function Ob(){var a=m.get_wind_params(),b=["wind_dir","wind_strength"];a?(f("wind_dir",a.wind_dir),f("wind_strength",a.wind_strength)):l(b,"disable")}function Za(a){var b={};"wind_dir"in a&&(b.wind_dir=a.wind_dir);"wind_strength"in a&&(b.wind_strength=a.wind_strength);
m.set_wind_params(b)}function f(a,b){var c=$("#"+a);c.val(b);c.slider("refresh")}function d(a,b,c){$("#"+b).bind("change",function(d){var f={};switch(c){case "string":f[b]=d.target.value;break;case "number":f[b]=parseFloat(d.target.value);break;case "bool":f[b]=Boolean(Number(d.target.value));break;default:return console.log("wrong value type"),null}a(f)})}function L(a,b){$("#"+b).ColorPicker({onChange:function(c,d,f){$("#"+b+" div").css("backgroundColor","#"+d);c={};f=Va.css_to_rgb(f.r,f.g,f.b);
c[b]=[f[0],f[1],f[2]];a(c)}})}function ob(){Yb.auto_rotate(.3)}function l(a,b){if(!a)return null;for(var c=0;c<a.length;c++){var d=$("#"+a[c]).parent().parent();"enable"==b?d.removeClass("ui-disabled"):"disable"==b&&d.addClass("ui-disabled")}}function Wa(a,b){if(!a)return null;for(var c=0;c<a.length;c++){var d=$("#"+a[c]);"enable"==b?d.removeClass("ui-disabled"):"disable"==b&&d.addClass("ui-disabled")}}function S(a){return m.get_object_name_hierarchy(a).join("->")}function ea(a){return m.get_object_by_dupli_name_list(a.split("->"))}
var n=k("animation"),v=k("app");k("assets");var db=k("camera"),Yb=k("camera_anim"),y=k("config");k("constraints");var ja=k("container"),w=k("controls"),Ba=k("data"),u=k("debug"),ib=k("gp_conf"),Oa=k("hmd_conf"),ka=k("geometry"),Cb=k("gyroscope"),x=k("input"),F=k("lights"),ia=k("main"),fb=k("hmd"),Bb=k("mixer"),aa=k("material"),B=k("nla"),zb=k("objects"),Va=k("rgb"),Vb=k("screenshooter"),m=k("scenes"),q=k("storage"),Eb=k("transform");k("util");var Xa=k("version"),Gb=k("vec3"),mb="DEBUG"===Xa.type(),
Xb=Math.PI/180,Wb=180/Math.PI,Ab=new Float32Array(2),Db=new Float32Array(3),Fb=new Float32Array(3),p=null,H=null,la="",wa=null,z=null,E=null,bb=function(){},R=null,eb=null;g.init=function(){q.init("b4w_viewer");var a=q.get("quality");if(a){switch(a){case "ULTRA":var b=y.P_ULTRA;break;case "HIGH":b=y.P_HIGH;break;case "LOW":b=y.P_LOW;break;case "CUSTOM":b=y.P_CUSTOM}y.set("quality",b)}y.set("stereo",q.get("stereo")||"NONE");""==q.get("outlining_overview_mode")?y.set("outlining_overview_mode",!0):y.set("outlining_overview_mode",
"true"===q.get("outlining_overview_mode"));v.init({canvas_container_id:"main_canvas_container",callback:nb,autoresize:!1,gl_debug:""==q.get("enable_gl_debug")?!1:"true"===q.get("enable_gl_debug"),show_hud_debug_info:"true"===q.get("show_hud_debug_info")?!0:!1,sfx_mix_mode:ha(),min_capabilities:K(),show_fps:!0,fps_elem_id:"fps_logger",fps_wrapper_id:"fps_container",alpha:!0,assets_dds_available:!mb,assets_min50_available:!mb,console_verbose:!0,physics_enabled:!0,debug_view:!0})}});b4w.require("viewer_main").init();
