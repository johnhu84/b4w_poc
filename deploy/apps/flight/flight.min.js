b4w.register("flight_main",function(H,a){function I(c,d){d?(g=document.querySelector("#hover_panel"),J(),u("pause_resume",function(){l?(l=!1,m.pause(),v("resume")):(l=!0,m.resume(),v("pause"))}),u("camera_view",function(){l&&r()}),window.addEventListener("resize",w,!1),document.addEventListener("keydown",function(c){13==c.keyCode&&h.request_fullscreen(document.body)},!1),K()):console.log("b4w init failure")}function J(){m.pause();var c=document.querySelector("#pl_cont"),d=c.querySelector("#pl_frame");
x=document.querySelector("#pl_bar");y=document.querySelector("#pl_caption");z=document.querySelector("#pl_fill");h.css_animate(c,"opacity",0,1,500,"","",function(){m.resume();d.style.opacity=1})}function w(){L.resize_to_container()}function K(){var c=A.get_std_assets_path();B.set_debug_resources_root("/flight_over_island/");B.load(c+"flight_over_island/flight_over_island.json",M,N,!1);w()}function M(){e=C.get_active_camera();var c=C.get_object_by_dupli_name,d=b.set_behavior,a=b.apply;k=c("Cessna Rig",
"Cessna Armature");t=c("Cessna Rig","Engine Speaker");n=c("golf_player_fmale_rig","rig");a(e,"CameraAction.001");d(e,b.AB_CYCLIC);a(k,"fly_cessna");d(k,b.AB_FINISH_STOP);a(n,"fly_girl");d(n,b.AB_FINISH_STOP);D(k,t,n);r();m.set_render_callback(O);l=!0}function D(c,d,a){p.speaker_stride(d);b.set_first_frame(c);b.play(c,P);b.stop(a);b.set_first_frame(a);b.play(a)}function r(){switch(f){case 10:f=20;b.stop(e);break;case 20:f=30;b.stop(e);p.listener_stride();break;case 30:f=40;b.play(e);p.listener_stride();
break;case 40:f=20,b.stop(e),p.listener_stride()}}function u(c,d){var a=document.getElementById(c),b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);b.addEventListener("mouseup",function(a){var b=document.getElementById(c),f=document.querySelector("#glow_down"),e=document.createElement("div");e.id="glow";e.style.top=a.target.offsetTop-25+"px";f&&(g.removeChild(f),g.appendChild(e));b.className=b.className.replace("button_down","");d()},!1);b.addEventListener("mouseover",function(c){if(!("ontouchstart"in
window||0<window.navigator.a)){c=c.target;var a=document.querySelector("#glow");a||(a=document.createElement("div"),a.id="glow",a.style.top=c.offsetTop,g.appendChild(a));a.style.top=c.offsetTop-20+"px"}},!1);b.addEventListener("mouseout",function(){var a=document.getElementById(c);a.className=a.className.replace("button_down","");E()},!1);b.addEventListener("mousedown",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){E();var d=document.getElementById(c),b=document.createElement("div");
b.id="glow_down";b.style.marginTop=a.target.offsetTop-28+"px";g.appendChild(b);d.className+=" button_down"}},!1)}function E(){var c=document.querySelector("#glow_down"),a=document.querySelector("#glow");a&&g.removeChild(a);c&&g.removeChild(c)}function v(a){document.getElementById("pause_resume").className=a+" controls_button"}function N(a){x.style.width=a/(460/295)+"%";z.style.width=100-a+"%";y.innerHTML=a+"%";if(100==a){var b=document.querySelector("#pl_cont");a=b.querySelector("#pl_frame");var e=
document.querySelector("#scroll_panel");a.style.opacity=0;h.css_animate(b,"opacity",1,0,1E3,"","",function(){h.css_animate(e,"opacity",0,1,500);b.parentNode.removeChild(b)})}}function P(){40!=f&&r();D(k,t,n)}function O(){if(40!=f){Q.get_bone_tsr(k,"Root",F);var a=G.get_trans_view(F);if(30==f)var b=R;else 20==f&&(b=S,T.add(a,U,b));V.eye_set_look_at(e,b,a)}}var b=a("animation"),Q=a("armature"),h=a("app"),V=a("camera"),A=a("config"),L=a("container"),B=a("data"),m=a("main");a("preloader");var C=a("scenes"),
p=a("sfx"),G=a("tsr"),W=a("version"),T=a("vec3"),q="DEBUG"===W.type(),U=new Float32Array([13,-13,4.5]),R=new Float32Array([-20,-120,2]),S=new Float32Array(3),F=G.create(),k=null,t=null,n=null,e=null,l=!1,f=10,g,x=null,z=null,y=null;H.init=function(){var a=q,b=h.get_url_params();b&&"show_fps"in b&&(a=!0);h.init({canvas_container_id:"main_canvas_container",callback:I,gl_debug:!1,show_fps:a,alpha:!1,physics_enabled:!1,console_verbose:q,assets_dds_available:!q,assets_pvr_available:!q,assets_min50_available:!1,
quality:A.P_HIGH})}});b4w.require("flight_main").init();
