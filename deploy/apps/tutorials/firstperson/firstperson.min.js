b4w.register("example_main",function(p,b){function q(a,d){if(d){g.create_preloader();window.addEventListener("resize",r);var b=t.get_std_assets_path()+"tutorials/firstperson/firstperson.json";u.load(b,v,w)}else console.log("b4w init failure")}function w(a){g.update_preloader(a)}function v(){var a=n.get_active_camera(),b=n.get_first_character();x.append_stiff_trans(a,b,[0,0,.7]);var c=h.get_canvas();c.addEventListener("mouseup",function(){y.request_pointerlock(c)},!1);z()}function r(){h.resize_to_container()}
function z(){function b(a,d,c){if(1==c)switch(d){case "FORWARD":k=1;break;case "BACKWARD":k=-1;break;case "LEFT":l=1;break;case "RIGHT":l=-1;break;case "RUNNING":e.set_character_move_type(a,e.CM_RUN)}else switch(d){case "FORWARD":case "BACKWARD":k=0;break;case "LEFT":case "RIGHT":l=0;break;case "RUNNING":e.set_character_move_type(a,e.CM_WALK)}e.set_character_move_dir(a,k,l)}var d=a.create_keyboard_sensor(a.KEY_A),c=a.create_keyboard_sensor(a.KEY_S),f=a.create_keyboard_sensor(a.KEY_D),g=a.create_keyboard_sensor(a.KEY_W),
h=a.create_keyboard_sensor(a.KEY_SPACE),m=a.create_keyboard_sensor(a.KEY_SHIFT),l=0,k=0,d=[g,c,d,f,m],c=n.get_first_character();a.create_sensor_manifold(c,"FORWARD",a.CT_TRIGGER,d,function(a){return a[0]},b);a.create_sensor_manifold(c,"BACKWARD",a.CT_TRIGGER,d,function(a){return a[1]},b);a.create_sensor_manifold(c,"LEFT",a.CT_TRIGGER,d,function(a){return a[2]},b);a.create_sensor_manifold(c,"RIGHT",a.CT_TRIGGER,d,function(a){return a[3]},b);a.create_sensor_manifold(c,"RUNNING",a.CT_TRIGGER,d,function(a){return(a[0]||
a[1]||a[2]||a[3])&&a[4]},b);a.create_sensor_manifold(c,"JUMP",a.CT_SHOT,[h],null,function(a){e.character_jump(a)})}var m=b("app"),t=b("config"),x=b("constraints"),h=b("container"),a=b("controls"),u=b("data");b("input");var y=b("mouse"),e=b("physics"),g=b("preloader"),n=b("scenes");b("transform");var f="DEBUG"===b("version").type();p.init=function(){var a=f,b=m.get_url_params();b&&"show_fps"in b&&(a=!0);m.init({canvas_container_id:"canvas3d",callback:q,show_fps:a,assets_dds_available:!f,assets_min50_available:!f,
alpha:!1})}});b4w.require("example_main").init();
